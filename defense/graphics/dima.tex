%\tikzstyle my grid=[style=help lines, color=blue!50, step=0.5, very thin, dashed]
\begin{tikzpicture}

	\draw (7.5, 3) node {\large Distributed IMA};
	
	\foreach \p in {3, 8} {
        \foreach \x in {0, 1, 2, 3} {
            \pgfmathsetmacro\l{\x+\p}
            \pgfmathsetmacro\r{\x+\p+1}
            \draw[black!50!gray, thick, fill=swred] (\l,1) rectangle node[black] {SW} (\r,2);
        }
        \pgfmathsetmacro\r{\p+4}
        \pgfmathsetmacro\m{\p+2}
        \draw[black!50!gray, thick, fill=hwgray] (\p, 0) rectangle node[black] {HW} (\r, 1);
        \draw[<->] (\m, 0) -- (\m, -1);
	}
	
    \draw[dashed, rounded corners] (3, -1.5) rectangle node {\itshape Shared Avionic Bus} (12, -1);

    \foreach \p in {0, 4} {
        \pgfmathsetmacro\l{\p+5}
        \draw[black!50!gray, thick, fill=hwgray] (\l,-3.2) rectangle node[black] {RDC} ++(1.1,1);
    }
    \foreach \p in {5.55, 9.55} {
        \draw[<->] (\p, -2.2) --++(0, 0.7);
        \draw[<->] (\p, -4) --++(0, 0.8);
    }
    \foreach \p in {0, 4} {
        \pgfmathsetmacro\l{\p+4.5}
        \draw[black!50!gray, thick, rounded corners, fill=ist-cyan!50!gray] (\l,-4.8) rectangle node[black] {Payload} ++(2,0.8);
    }
	
\end{tikzpicture}
